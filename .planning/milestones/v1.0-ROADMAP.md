# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-01-31
**Phases:** 1-5
**Total Plans:** 9

## Overview

This milestone delivers a custom webshop where customers can order textiles with custom dimensions and accurate matrix-based pricing. We start by building the foundation (Next.js setup and Shopify store configuration), then develop the core pricing engine with dimension input validation, integrate frontend product pages with real-time price updates, add cart management for multiple custom items, and finally connect to Shopify for checkout via Draft Orders.

## Phases

### Phase 1: Project Setup

**Goal**: Development environment ready with Next.js application and configured Shopify store
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:
- [x] 01-01-PLAN.md -- Initialize Next.js project, dependencies, env validation, and pricing matrix
- [x] 01-02-PLAN.md -- Shopify API client, health endpoint, and store configuration

**Success Criteria:**
1. Next.js application runs locally with TypeScript and App Router
2. Shopify store exists with test products configured
3. Application can connect to Shopify Admin API with valid credentials
4. Pricing matrix JSON file exists with 20x20 sample data (10-200cm range)
5. Development environment variables are configured and working

**Completed:** 2026-01-29

---

### Phase 2: Pricing Engine & Validation

**Goal**: Backend pricing engine calculates accurate prices using matrix lookup with dimension validation
**Depends on**: Phase 1
**Requirements**: PRICE-01, PRICE-02, PRICE-03, PRICE-04, PRICE-05, PRICE-06, PRICE-07, DIM-04, DIM-05, DIM-06, DIM-07, DIM-08, DIM-09, DIM-10, DIM-11
**Plans**: 2 plans

Plans:
- [x] 02-01-PLAN.md -- Pure pricing library (types, Zod validation, calculator functions)
- [x] 02-02-PLAN.md -- POST /api/pricing route handler wiring validation to calculator

**Success Criteria:**
1. Backend API endpoint accepts dimension inputs and returns calculated price
2. Dimensions automatically round up to nearest 10cm increment
3. Input validation rejects values outside 10-200cm range
4. Price calculation uses integer cents (no floating-point errors)
5. Pricing engine has zero Shopify dependencies (pure TypeScript functions)

**Completed:** 2026-01-29

---

### Phase 3: Product Page & Real-time Pricing

**Goal**: Customers can view products, enter dimensions, and see prices update in real-time
**Depends on**: Phase 2
**Requirements**: DIM-01, DIM-02, DIM-03, PRICE-08, PRICE-09, UX-01, UX-02, UX-05, UX-06, UX-07, UX-08
**Plans**: 1 plan

Plans:
- [x] 03-01-PLAN.md -- Product page shell and dimension configurator with debounced real-time pricing

**Success Criteria:**
1. Product page displays product information with dimension input fields
2. Width and height inputs show cm unit labels
3. Price updates in real-time as dimensions change (no page reload)
4. Input fields show visual feedback (highlighting, confirmation)
5. Page is mobile-responsive with numeric keyboard on mobile

**Completed:** 2026-01-31

---

### Phase 4: Cart Management

**Goal**: Customers can add multiple custom-dimension items to cart and view their configurations
**Depends on**: Phase 3
**Requirements**: CART-01, CART-02, CART-03, CART-04, CART-05, UX-03
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md -- Cart store (Zustand + persist/TTL), add-to-cart on product page, cart icon in header
- [x] 04-02-PLAN.md -- Cart page with item display, quantity management, removal dialog, sticky footer

**Success Criteria:**
1. Customer can add configured item to cart from product page
2. Cart displays multiple items with different dimension configurations
3. Each cart item shows product name with dimensions and calculated price
4. Cart persists configuration data (width, height, normalized values)
5. Cart page is mobile-responsive

**Completed:** 2026-01-31

---

### Phase 5: Shopify Integration & Checkout

**Goal**: Customers can checkout via Shopify with custom-priced Draft Orders
**Depends on**: Phase 4
**Requirements**: SHOP-01, SHOP-02, SHOP-03, SHOP-04, SHOP-05, SHOP-06, SHOP-07, ORDER-01, ORDER-02, ORDER-03, ORDER-04, ORDER-05, UX-04
**Plans**: 2 plans

Plans:
- [x] 05-01-PLAN.md -- Backend: env validation, Draft Order creation function, POST /api/checkout route
- [x] 05-02-PLAN.md -- Frontend: wire checkout button with loading state, error handling, Shopify redirect

**Success Criteria:**
1. Backend creates Shopify Draft Order from cart on checkout request
2. Draft Order includes all cart items with locked custom prices
3. Each line item includes dimensions in product name and configuration payload
4. Customer is redirected to Shopify checkout URL
5. Customer can complete payment and order is created in Shopify
6. Checkout flow works on mobile devices

**Completed:** 2026-01-31

---

## Milestone Summary

**Key Decisions:**

- Pricing as standalone domain (zero Shopify dependencies) — enables future app extraction
- Draft Order approach for MVP — works on all Shopify plans (Basic, Shopify, Advanced, Plus)
- Integer cents for all pricing — prevents floating-point rounding errors
- Round UP rounding strategy — customer always gets at least what they ordered (25cm → 30cm)
- 400ms debounce for pricing API — balances responsiveness with API call efficiency
- Zustand with localStorage persist — lightweight cart state with 7-day TTL
- Custom line items (no variantId) — avoids Shopify API price override bug
- Cart clears before Shopify redirect — prevents duplicate orders from browser back button

**Issues Resolved:**

- Pricing engine isolated from framework dependencies — ✓ achieved with src/lib/pricing/ module
- Real-time price updates without page reload — ✓ achieved with debounced API calls and race condition handling
- Cart persistence across page refresh — ✓ achieved with Zustand persist middleware and 7-day TTL
- Custom pricing in Shopify checkout — ✓ achieved with Draft Orders and custom line items
- formatPrice duplication — ✓ resolved by consolidating to single shared export

**Issues Deferred:**

- Phase 3 verification documentation — deferred to v1.1 (process gap, functionally complete)
- Test products in Shopify store — deferred to v1.1 (using mock data in v1.0)
- Pricing matrix reference in line items (ORDER-04) — deferred per Phase 5 CONTEXT.md decision
- Unit tests for pricing calculator and cart — deferred to v1.1 (only 1 integration test in v1.0)

**Technical Debt Incurred:**

- None (formatPrice duplication was resolved during milestone)

---

_For current project status, see .planning/PROJECT.md and .planning/MILESTONES.md_
